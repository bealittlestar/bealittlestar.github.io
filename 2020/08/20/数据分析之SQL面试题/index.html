<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>数据分析之SQL面试题 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="实战SQL的技巧：1） 拆解问题 2）执行顺序，逻辑得当 拆解的小问题： ​    1） 排序，窗口函数的应用，order by —- 分组排序 ​    2） 判断， if(), ifnull(), case() —- 空值问题，数据处理    3） 连接， 全连接，内连接，外连接 —- 连续几天     4）日期时间，日期时间函数的计算 —- 时间间隔的天数，格式处理，提取信息    5）分组">
<meta property="og:type" content="article">
<meta property="og:title" content="数据分析之SQL面试题">
<meta property="og:url" content="http://bealittlestar.github.io/2020/08/20/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E4%B9%8BSQL%E9%9D%A2%E8%AF%95%E9%A2%98/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="实战SQL的技巧：1） 拆解问题 2）执行顺序，逻辑得当 拆解的小问题： ​    1） 排序，窗口函数的应用，order by —- 分组排序 ​    2） 判断， if(), ifnull(), case() —- 空值问题，数据处理    3） 连接， 全连接，内连接，外连接 —- 连续几天     4）日期时间，日期时间函数的计算 —- 时间间隔的天数，格式处理，提取信息    5）分组">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://iknow-pic.cdn.bcebos.com/eaf81a4c510fd9f9d19723c3202dd42a2934a493?x-bce-process%3Dimage%2Fresize%2Cm_lfit%2Cw_600%2Ch_800%2Climit_1%2Fquality%2Cq_85%2Fformat%2Cf_jpg">
<meta property="og:image" content="https://img2018.cnblogs.com/blog/1206977/201911/1206977-20191101141406910-243495753.png">
<meta property="og:image" content="https://mmbiz.qpic.cn/mmbiz/1OYP1AZw0W3tSUvjyS5cAyXmHujLfFa9Nx5d8OQokkByCJDol5JspFxKsbia9FRJ8ANcHFqcdPI2bdLVSpODPGw/640?wx_fmt=other&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1">
<meta property="og:image" content="https://mmbiz.qpic.cn/mmbiz/1OYP1AZw0W3tSUvjyS5cAyXmHujLfFa97gYf9gzDQG7UiczUibHqbo8tnvODSkEuXBPybu4PTeHA1DR5u1080PfQ/640?wx_fmt=other&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1">
<meta property="og:image" content="https://pic2.zhimg.com/80/v2-ad1d86f5a5b9f0ef684907b20b341099_720w.jpg">
<meta property="og:image" content="https://pic3.zhimg.com/80/v2-7b63c571dfa285c0aa0c8f944ca89482_720w.jpg">
<meta property="og:image" content="https://mmbiz.qpic.cn/mmbiz/1OYP1AZw0W3tSUvjyS5cAyXmHujLfFa93MKeQLibXS0JeqQP7GoTE5Z9L5AyCJoptyZsewuKciaXMibmz2OSYP3Og/640?wx_fmt=other&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1">
<meta property="og:image" content="https://mmbiz.qpic.cn/mmbiz_png/rfaNuFeWzwDHicVppcn3zqs3KdvibEXJW7plQCCOZzNDxoSs1luiafuTqA4kkiaGk8DoP5MlQDib9GS29DvHsTaIIaw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1">
<meta property="og:image" content="https://mmbiz.qpic.cn/mmbiz_png/rfaNuFeWzwDHicVppcn3zqs3KdvibEXJW7TXfSLE4UOhfch0DgHlHInViaVsMsyYvzGS4cUWGnfgk0LAOPUpWb6jg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1">
<meta property="og:image" content="https://mmbiz.qpic.cn/mmbiz_png/rfaNuFeWzwDHicVppcn3zqs3KdvibEXJW7hkXZFfUHia6uia0OvoI2tZ3N87UTqVLWz6EfXHZ8dMwudXHNIxtA5yFQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1">
<meta property="og:image" content="http://bealittlestar.github.io/2020/08/20/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E4%B9%8BSQL%E9%9D%A2%E8%AF%95%E9%A2%98/博客/newblog/source/_posts/数据分析之SQL/image-20210601135359672.png">
<meta property="og:image" content="http://bealittlestar.github.io/2020/08/20/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E4%B9%8BSQL%E9%9D%A2%E8%AF%95%E9%A2%98/博客/newblog/source/_posts/数据分析之SQL/FN9$IYZ7_T%7D%6054_@5_YEAF1.png">
<meta property="article:published_time" content="2020-08-20T07:30:56.000Z">
<meta property="article:modified_time" content="2022-10-05T11:17:48.027Z">
<meta property="article:author" content="May May">
<meta property="article:tag" content="SQl">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://iknow-pic.cdn.bcebos.com/eaf81a4c510fd9f9d19723c3202dd42a2934a493?x-bce-process%3Dimage%2Fresize%2Cm_lfit%2Cw_600%2Ch_800%2Climit_1%2Fquality%2Cq_85%2Fformat%2Cf_jpg">
  
    <link rel="alternate" href="../../../../atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="../../../../favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="../../../../css/style.css">

  
    
<link rel="stylesheet" href="../../../../fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="../../../../index.html" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="../../../../index.html">Home</a>
        
          <a class="main-nav-link" href="../../../../archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="../../../../atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://bealittlestar.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-数据分析之SQL面试题" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="" class="article-date">
  <time class="dt-published" datetime="2020-08-20T07:30:56.000Z" itemprop="datePublished">2020-08-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="../../../../categories/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/">数据分析</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      数据分析之SQL面试题
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>实战SQL的技巧：1） 拆解问题 2）执行顺序，逻辑得当</p>
<p>拆解的小问题：</p>
<p>​    1） 排序，窗口函数的应用，order by —- 分组排序</p>
<p>​    2） 判断， if(), ifnull(), case() —- 空值问题，数据处理</p>
<p>   3） 连接， 全连接，内连接，外连接 —- 连续几天 </p>
<p>   4）日期时间，日期时间函数的计算 —- 时间间隔的天数，格式处理，提取信息</p>
<p>   5）分组， group by  having —- 分组计算</p>
<p>   6） 子查询，select语句的嵌套  —- 条件筛选，建立过度表</p>
<span id="more"></span>
<h1 id="数据查询"><a href="#数据查询" class="headerlink" title="数据查询"></a>数据查询</h1><ol>
<li>表是哪个？ 列名是什么？</li>
<li>经典五十题</li>
</ol>
<h1 id="经典例题"><a href="#经典例题" class="headerlink" title="经典例题"></a>经典例题</h1><h2 id="case-when-group-by"><a href="#case-when-group-by" class="headerlink" title="case when + group by"></a>case when + group by</h2><p>实现行列互换，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">select score.c_id,c_name,</span><br><span class="line">sum(case when 0&lt;score and score&lt;= 60 then 1 else 0 end)/count(score) 不及格率, </span><br><span class="line">sum(case when 60&lt;score and score&lt;= 70 then 1 else 0 end)/count(score) 中等率, </span><br><span class="line">sum(case when 70&lt;score and score&lt;=85 then 1 else 0 end)/count(score) 优良率, </span><br><span class="line">sum(case when 85&lt;score and score&lt;=100 then 1 else 0 end)/count(score) 优秀率 </span><br><span class="line">from score left join course on score.c_id = course.c_id</span><br><span class="line">group by score.c_id;</span><br></pre></td></tr></table></figure>
<h1 id="图解-SQL-面试题"><a href="#图解-SQL-面试题" class="headerlink" title="图解 SQL 面试题"></a>图解 SQL 面试题</h1><h2 id="简单查询"><a href="#简单查询" class="headerlink" title="简单查询"></a>简单查询</h2><p>select from</p>
<h3 id="图解-SQL-面试题-1"><a href="#图解-SQL-面试题-1" class="headerlink" title="图解 SQL 面试题"></a>图解 SQL 面试题</h3><p>编写一个 SQL <strong>查询</strong>，查找<strong>学生表</strong>中所有<strong>重复</strong>的<strong>学生名</strong>。</p>
<p>having 对聚合函数进行筛选</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select 列名</span><br><span class="line">from 表名</span><br><span class="line">group by 列名</span><br><span class="line">having count(列名) &gt; n;</span><br></pre></td></tr></table></figure>
<ol>
<li>select</li>
<li>group by</li>
<li><p>count(1) count(*)</p>
</li>
<li><p>计算学术名，出现次数</p>
<p>1）创建一个辅助表，将姓名列进行行分组汇总</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select 姓名, count(姓名) as 计数</span><br><span class="line">from 学生表</span><br><span class="line">group by 姓名;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ol>
<li><p>筛选出次数大于2</p>
<p>2）选出辅助表中计数大于 1 的姓名</p>
<p>select 姓名 from 辅助表</p>
<p>where 计数 &gt; 1;</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select   b.name</span><br><span class="line">from</span><br><span class="line">	(select name count(1) as num from  student group by name) as b </span><br><span class="line">where</span><br><span class="line">	b.num&gt;1</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">select 姓名 from</span><br><span class="line">(</span><br><span class="line"> select 姓名, count(姓名) as 计数</span><br><span class="line"> from 学生表</span><br><span class="line"> group by 姓名</span><br><span class="line">) as 辅助表</span><br><span class="line">where 计数 &gt; 1;</span><br></pre></td></tr></table></figure>
<p>方法三： 链接</p>
<p>name id进行拼接</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(select name id from table ) as table1 </span><br><span class="line">inner join</span><br><span class="line">(select name count(name) as 次数 from table gorup by name having count(name)&gt;1) as table 2 </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>再select name</p>
<h2 id="复杂查询"><a href="#复杂查询" class="headerlink" title="复杂查询"></a>复杂查询</h2><h3 id="如何查找第-N-高的数据？"><a href="#如何查找第-N-高的数据？" class="headerlink" title="如何查找第 N 高的数据？"></a>如何查找第 N 高的数据？</h3><p><strong>【题目】</strong></p>
<p>现在有 “课程表”，记录了学生选修课程的名称以及成绩。</p>
<p>现在需要找出<strong>语文课</strong>中<strong>成绩第二</strong>高<strong>的学生成绩</strong>。如果不存在第二高成绩的学生，那么查询应返回 null。</p>
<p>step1: 查找语文课成绩第二高的学术学号</p>
<p>​     step1: 语文课进行排名</p>
<p>表1: select rank() over(partition by 课程 order by 成绩) as a, id from 课程表</p>
<p>  step2: 找到id</p>
<p>select id from 表1 where a = 2</p>
<p>step2: where 字句</p>
<p>1）第二高的查询思路，利用本题的解决办法可以解决这类问题：查询第 N 高的数据</p>
<p>2） limit 子句的用法</p>
<p>3） ifnull 的用法</p>
<p>不用窗口函数</p>
<p> limit</p>
<p>对语文课进行成绩进行排序</p>
<p>select ifnull((select , null) as cd</p>
<h2 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h2><p>现在有两个表，“学生表” 记录了学生的基本信息，有 “学号”、“姓名”。</p>
<p>“成绩” 表记录了学生选修的课程，以及对应课程的成绩。</p>
<p>这两个表通过 “学号” 进行关联。</p>
<p>现在要查找出所有学生的学号，姓名，课程和成绩。</p>
<p>select distinct a.id, a.name, b.   from a,b where a.id = bid</p>
<p>select distince a.id, a.name, b from a as a1 left join b as b1 on a1.id = b1.id</p>
<p>下面是学生的名单，表名为 “学生表”；近视学生的名单，表名为 “近视学生表”。请问不是近视眼的学生都有谁？</p>
<p>（“学生表”表中的学号与 “近视学生” 表中的学生学号一一对应</p>
<ol>
<li>学生表与近视表进行连接</li>
<li>判断 is null</li>
</ol>
<p>雇员表 “中记录了员工的信息，“薪水表“中记录了对应员工发放的薪水。两表通过“雇员编号” 关联。</p>
<p>查找当前所有雇员入职以来的薪水涨幅，给出雇员编号以及其对应的薪水涨幅，并按照薪水涨幅进行升序。</p>
<p>（注：薪水表中结束日期为 2004-01-01 的才是当前员工，否则是已离职员工）</p>
<ol>
<li><p>计算工资涨幅</p>
<p>select a.id a.salary-b.salary as addsalary from a1 as a, a1 as b where a.date&gt;b.date</p>
</li>
<li><p>雇佣表进行拼接</p>
</li>
<li></li>
</ol>
<h3 id="日期比较"><a href="#日期比较" class="headerlink" title="日期比较"></a>日期比较</h3><p>datediff(日期 1, 日期 2)：</p>
<p>得到的结果是日期 1 与日期 2 相差的天数。</p>
<p>如果日期 1 比日期 2 大，结果为正；如果日期 1 比日期 2 小，结果为负。</p>
<p>另一个关于时间计算的函数是：</p>
<blockquote>
<p>timestampdiff(时间类型, 日期 1, 日期 2)</p>
<p>这个函数和上面 diffdate 的正、负号规则刚好相反。</p>
<p>日期 1 大于日期 2，结果为负，日期 1 小于日期 2，结果为正。</p>
</blockquote>
<p>在 “时间类型” 的参数位置，通过添加 “day”, “hour”, “second” 等关键词，来规定计算天数差、小时数差、还是分钟数差。示例如下图：</p>
<p>下面是某公司每天的营业额，表名为 “日销”。“日期” 这一列的数据类型是日期类型（date）。</p>
<p>请找出所有比前一天（昨天）营业额更高的数据。（前一天的意思，如果 “当天” 是 1 月 2 号，“昨天”（前一天）就是 1 号）</p>
<p>select id Datadiff(a.data,b.date) from a, b whre a.id = b.id </p>
<h3 id="最小的N个数"><a href="#最小的N个数" class="headerlink" title="最小的N个数"></a>最小的N个数</h3><p>现在需要：</p>
<ol>
<li><p>筛选出 2017 年入学的 “计算机” 专业年龄最小的 3 位同学名单（姓名、年龄）</p>
<p>2017年</p>
<p>计算机</p>
<p>单表查询</p>
<p>select name,age from 学术表 where year(date)=2017 and 专业=‘计算机’ order by age desc limit 0, 3</p>
</li>
</ol>
<ol>
<li><p>统计<strong>每个班</strong>同学各科<strong>成绩平均分大于 80 分</strong>的<strong>人数</strong>和<strong>人数占比</strong></p>
</li>
<li><p>平均成绩大于80的id</p>
<p>select id from 课程表 group id having aver(分数)&gt;80</p>
</li>
<li><p>平均</p>
</li>
</ol>
<p>使用<a target="_blank" rel="noopener" href="http://mp.weixin.qq.com/s?__biz=MzAxMTMwNTMxMQ==&amp;mid=2649246563&amp;idx=2&amp;sn=3ffe509999d144d23dec5acc101fc2ef&amp;chksm=835fc353b4284a45ce01391453fe2fec1b225bbd6bbdb67dd7f304aacdd4f21f60d0b27ba309&amp;scene=21#wechat_redirect">逻辑树分析方法</a>将复杂问题变成简单问题的能力</p>
<p>当遇到 “每个” 问题的时候，要想到用分组汇总</p>
<p>查询最小 n 个数据的问题：先排序（order by），然后使用 limit 取出前 n 行数据</p>
<p>遇到有筛选条件的统计数量问题时，使用 case 表达式筛选出符合条件的行为 1，否则为 0。然后用汇总函数（sum）对 case 表达式输出列求和。</p>
<h3 id="行列互换-模板"><a href="#行列互换-模板" class="headerlink" title="行列互换(模板)"></a>行列互换(模板)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">select A,</span><br><span class="line">-- 第2步，在行列互换结果表中，其他列里的值分别使用case和max来获取</span><br><span class="line">max(case B when &#x27;m&#x27; then C else 0 end) as &#x27;m&#x27;,</span><br><span class="line">max(case B when &#x27;n&#x27; then C else 0 end) as &#x27;n&#x27;</span><br><span class="line">from cook</span><br><span class="line">-- 第1步，在行列互换结果表中按第1列分组</span><br><span class="line">group by A;</span><br></pre></td></tr></table></figure>
<h3 id="连续"><a href="#连续" class="headerlink" title="连续"></a>连续</h3><p>• 本题考察的是连续出现，会有同学忽略 “连续” 二字</p>
<p>• 考察对自关联的灵活应用</p>
<p>• 从题目连续 3 次成绩相等，判断出 “成绩相等” 和“学号连续”这 2 个条件。考察构建 “连续学号成绩相等” 的思维构建能力</p>
<h3 id="留存率"><a href="#留存率" class="headerlink" title="留存率"></a>留存率</h3><p>指标定义：</p>
<p>某日活跃用户数，某日活跃的去重用户数。</p>
<p>N 日活跃用户数，某日活跃的用户数在之后的第 N 日活跃用户数。</p>
<p>N 日活跃留存率，N 日留存用户数 / 某日活跃用户数</p>
<p>例：登陆时间（20180501 日）去重用户数 10000，这批用户在 20180503 日仍有 7000 人活跃，则 3 日活跃留存率为 7000/10000=70%</p>
<p>活跃用户</p>
<p>select data count(data) from 表 group by  日期</p>
<p>次日留存率</p>
<p>select a.用户id,a.登陆时间,b.登陆时间</p>
<p>from 用户行为信息表 as a  </p>
<p>left join 用户行为信息表 as b</p>
<p>on a.用户id = b.用户id</p>
<p>where a.应用名称= ‘相机’;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">select a.登陆时间,count(distinct a.用户id) as 活跃用户数,</span><br><span class="line">count(distinct when 时间间隔=1 then 用户id else null end) as  次日留存数,</span><br><span class="line">count(distinct when 时间间隔=1 then 用户id else null end) as  次日留存数 / count(distinct a.用户id) as 次日留存率,</span><br><span class="line">count(distinct when 时间间隔=3 then 用户id else null end) as  三日留存数,</span><br><span class="line">count(distinct when 时间间隔=3 then 用户id else null end) as  三日留存数 / count(distinct a.用户id) as 三日留存率,</span><br><span class="line">count(distinct when 时间间隔=7 then 用户id else null end) as  七日留存数,</span><br><span class="line">count(distinct when 时间间隔=7 then 用户id else null end) as  七日留存数 / count(distinct a.用户id) as 七日留存率</span><br><span class="line"> from</span><br><span class="line">(select *,timestampdiff(day,a.登陆时间,b.登陆时间) as 时间间隔</span><br><span class="line">from </span><br><span class="line">(select a.用户id,a.登陆时间,b.登陆时间</span><br><span class="line">from 用户行为信息表 as a  </span><br><span class="line">left join 用户行为信息表 as b</span><br><span class="line">on a.用户id = b.用户id</span><br><span class="line">where a.应用名称= &#x27;相机&#x27;) as c</span><br><span class="line">) as d</span><br><span class="line">group by a.登陆时间;</span><br></pre></td></tr></table></figure>
<p><strong>子查询和连接后的东西循环放进from （） as b</strong></p>
<p><strong>提取需要什么条件，嵌套一层在from里面，可能涉及join</strong></p>
<p><strong>先获取时间，在计算时间间隔，如果绘制出来计算时间间隔内容。</strong></p>
<p><strong>【举一反三】</strong></p>
<p>链家 2018 春招笔试面试：现有订单表和用户表，格式字段如下图：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>订单表</th>
<th>时间</th>
<th>订单 id</th>
<th>商品 id</th>
<th>用户 id</th>
<th>订单金额</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="table-container">
<table>
<thead>
<tr>
<th>用户表</th>
<th>用户 id</th>
<th>姓名</th>
<th>性别</th>
<th>年龄</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<p>1.查询 2019 年 Q1 季度，不同性别，不同年龄的成交用户数，成交量及成交金额</p>
<p>select count(distince id), ave(), sum() from a join b on a.id  = b.id group by gender, name, ag4</p>
<p>\1. 交叉连接CROSS JOIN</p>
<p>如果不带WHERE条件子句，它将会返回被连接的两个表的笛卡尔积，返回结果的行数等于两个表行数的乘积；</p>
<p>举例,下列A、B、C 执行结果相同，但是效率不一样：</p>
<p>A:SELECT * FROM table1 CROSS JOIN table2</p>
<p>B:SELECT * FROM table1,table2</p>
<p>C:select * from table1 a inner join table2 b</p>
<p>A:select a.<em>,b.</em> from table1 a,table2 b where a.id=b.id</p>
<p>B:select * from table1 a cross join table2 b where a.id=b.id (注：cross join后加条件只能用where,不能用on)</p>
<p>C:select * from table1 a inner join table2 b on a.id=b.id</p>
<p>Right join(右联接):是以右表为准,右表中的记录都会出现在查询结果中,如果<strong>左表没有相匹配的记录,则以 null填充.</strong> Inner join(内联接):两张表地位是平等的,符合联接条件。</p>
<p>2.2019 年 1-4 月产生订单的用户，以及在次月的留存用户数</p>
<h1 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h1><h2 id="拼多多面试题：如何查找前-20-的数据？"><a href="#拼多多面试题：如何查找前-20-的数据？" class="headerlink" title="拼多多面试题：如何查找前 20% 的数据？"></a>拼多多面试题：如何查找前 20% 的数据？</h2><p>用户访问次数表，列名包括用户编号、用户类型、访问量。要求在剔除访问次数前 20% 的用户后，每类用户的平均访问次数。（拼多多、网易面试题）</p>
<p>一步一步嵌套到from里面筛选，条件，最终</p>
<ol>
<li><p>要求在剔除访问次数前 20% 的用户后</p>
<ol>
<li><p>找到20%的访问量分界点</p>
<p>​    先排名，找到最大排名*20%</p>
<p>a: select id row_number() over(partition by class order by 次数) as 排名 from table</p>
<p>   from</p>
<p>   max 找到最大的where 子句里面</p>
<p>from id from a 排名&lt;=最大排名*0.2</p>
<p>最大排名：</p>
<p>​    select max(排名) from a</p>
<p>select <em><br>from a<br>where 排名&lt;= (select max(排名) from a) </em> 0.2</p>
<p>剔除</p>
</li>
</ol>
</li>
</ol>
<pre><code>   b: select * 
   from 
   (select *,
          row_number() over(order by 访问量 desc) as 排名
   from 用户访问次数表) as a
   where 排名 &gt; (select max(排名) from a) * 0.2;
</code></pre><ol>
<li></li>
</ol>
<p>select 用户类型,avg(访问量)</p>
<p>from b</p>
<p>group by 用户类型;</p>
<p>select 用户类型,avg(访问量)<br>from<br>(select <em><br>from<br>(select </em>,<br>       row_number() over(order by 访问量 desc) as 排名<br>from 用户访问次数表) as a<br>where 排名 &gt; (select max(排名) from a) * 0.2) as b<br>group by 用户类型;</p>
<p>方法：</p>
<p>step1: </p>
<p>select *,</p>
<p>​       row_number() over(order by 排名的列 desc) as 排名</p>
<p>from 表名;</p>
<p>step2: </p>
<p>select * </p>
<p>from a</p>
<p>where 排名 &lt;= (select max(排名) from a) * 百分之N;</p>
<p>1.添加列<br>alter table 表名 add column 列名 类型 【first|after 字段名】;<br>2.修改列的类型或约束<br>alter table 表名 modify column 列名 新类型 【新约束】;<br>3.修改列名<br>alter table 表名 change column 旧列名 新列名 类型;<br>4 .删除列<br>alter table 表名 drop column 列名;<br>5.修改表名<br>alter table 表名 rename 【to】 新表名;<br>6.将某一列放到第一列<br>alter table 表名 modify column 列名 类型 first;</p>
<h3 id="不同所在"><a href="#不同所在" class="headerlink" title="不同所在"></a>不同所在</h3><p>他两的不同还是很好区分的，网上一搜，就能找到，并且能够很好的理解：</p>
<blockquote>
<p>Where 是一个<code>约束声明</code>，使用Where约束来自数据库的数据，Where是<code>在结果返回之前起作用</code>的，Where中<code>不能使用聚合函数</code>。<br>Having是一个<code>过滤声明</code>，是在查询<code>返回结果集以后对查询结果进行的过滤操作</code>，在Having中<code>可以使用聚合函数</code>。<br>在查询过程中聚合语句(sum,min,max,avg,count)要比having子句优先执行。而where子句在查询过程中执行优先级高于聚合语句。</p>
</blockquote>
<div class="table-container">
<table>
<thead>
<tr>
<th>语句</th>
<th style="text-align:center">作用时间</th>
<th style="text-align:center">是否能够使用聚合函数</th>
</tr>
</thead>
<tbody>
<tr>
<td>where</td>
<td style="text-align:center">结果返回之前</td>
<td style="text-align:center">不能</td>
</tr>
<tr>
<td>having</td>
<td style="text-align:center">结果返回之后</td>
<td style="text-align:center">能</td>
</tr>
</tbody>
</table>
</div>
<p>where里面不能有聚合函数，可以通过where字句</p>
<p>group by 用了以后，选择的字段，处理min,max等等，就是类别组，其他不行</p>
<h1 id="日期"><a href="#日期" class="headerlink" title="日期"></a>日期</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT  DATE_FORMAT(submit_time,&#x27;%Y%m&#x27;) month, </span><br><span class="line">    round(count(distinct uid, DATE_FORMAT(submit_time,&#x27;%Y%m%d&#x27;))/count(distinct uid),2) as avg_active_days, </span><br><span class="line">    count(distinct 	uid) as 	mau</span><br><span class="line">FROM exam_record</span><br><span class="line">where YEAR(submit_time) =2021</span><br><span class="line">group by month</span><br></pre></td></tr></table></figure>
<h2 id="SQL17-平均活跃天数和月活人数"><a href="#SQL17-平均活跃天数和月活人数" class="headerlink" title="SQL17 平均活跃天数和月活人数"></a>SQL17 平均活跃天数和月活人数</h2><h2 id="题目主要信息："><a href="#题目主要信息：" class="headerlink" title="题目主要信息："></a>题目主要信息：</h2><ul>
<li>计算2021年每个月里试卷作答区用户平均月活跃天数avg_active_days和月度活跃人数mau</li>
<li>结果保留两位小数</li>
</ul>
<h2 id="问题拆分："><a href="#问题拆分：" class="headerlink" title="问题拆分："></a>问题拆分：</h2><ul>
<li>根据提交时间submit_time不为空筛选活跃的的人。<strong>知识点：select…from…where…</strong></li>
<li>筛选每个月的平均活跃天数和总活跃人数：<ul>
<li>根据月份来选择时间。<strong>知识点：date_format()</strong> 通过这个函数匹配’%Y%m’年份和月份；</li>
<li>计算用户平均活跃天数：<ul>
<li>根据不同的日期<strong>且</strong>不同的用户ID统计每个月用户的总活跃天数。<strong>知识点：distinct、count()、date_format()</strong></li>
<li>统计每个月用的总人数。<strong>知识点：distinct、count()</strong></li>
<li>总天数/总人数得到每个月的用户平均活跃天数；</li>
</ul>
</li>
<li>计算每月总活跃人数，直接统计每月不同的用户id数。<strong>知识点：count()、distinct</strong></li>
</ul>
</li>
<li>按照月份分组<code>group by date_format(submit_time, &#39;%Y%m&#39;)</code> <strong>知识点：group by …</strong></li>
<li>保留两位小数。 <strong>知识点：round(x,2)</strong></li>
</ul>
<ul>
<li>本题主要是考察知识点：group by、date_format、day、last_day、round、union all</li>
<li>DATE_FORMAT(submit_time, “%Y%m” ) 返回的是202109这样；day(‘2021-08-02 11:41:01’)返回的是2，last_day(‘2021-08-02 11:41:01’)返回的是2021-08-31，last_day(‘2021-09-02 11:41:01’)返回的是2021-09-30</li>
<li>先按月份分组</li>
<li>month_q_cnt = 当月的记录总数</li>
<li>avg_day_q_cnt = month_q_cnt / 当月的天数，通过day(last_day(…))得到当月的天数</li>
<li>union all 汇总的数据。多个表union all时不会去重记录，字段名、字段顺序、字段类型要一致。</li>
<li></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">select </span><br><span class="line">DATE_FORMAT(submit_time,&#x27;%Y%m&#x27;) as submit_month,</span><br><span class="line">count(*) as month_q_cnt,</span><br><span class="line">round(count(*) / day(last_day(submit_time)) ,3) as avg_day_q_cnt</span><br><span class="line">from practice_record where score is not null </span><br><span class="line">and year(submit_time) = &#x27;2021&#x27;</span><br><span class="line">group by DATE_FORMAT(submit_time,&#x27;%Y%m&#x27;)</span><br><span class="line"></span><br><span class="line">union all </span><br><span class="line"></span><br><span class="line">select </span><br><span class="line">&#x27;2021汇总&#x27; as submit_month,</span><br><span class="line">count(*) as month_q_cnt,</span><br><span class="line">round(count(*) /31 ,3) as avg_day_q_cnt -- /30 会不通过用例</span><br><span class="line">from practice_record where score is not null </span><br><span class="line">and year(submit_time) = &#x27;2021&#x27; </span><br><span class="line">order by submit_month ;</span><br></pre></td></tr></table></figure>
<h1 id="面试题"><a href="#面试题" class="headerlink" title="面试题"></a>面试题</h1><h2 id="哪些位置可以使用查询select的结果作为表格"><a href="#哪些位置可以使用查询select的结果作为表格" class="headerlink" title="哪些位置可以使用查询select的结果作为表格"></a>哪些位置可以使用查询select的结果作为表格</h2><p>三种情况。</p>
<p>子查询的位置和作用，from ，in， inner join等等位置</p>
<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><h3 id="日期函数"><a href="#日期函数" class="headerlink" title="日期函数"></a>日期函数</h3><h3 id="Case-when"><a href="#Case-when" class="headerlink" title="Case when"></a>Case when</h3><p>可以放在 select having</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select case when a=&#x27;1&#x27; then 2</span><br><span class="line">else 5</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CASE WHEN col_1 <span class="title function_ invoke__">IN</span> ( <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>) THEN <span class="string">&#x27;第一类&#x27;</span></span><br><span class="line">WHEN col_1 <span class="title function_ invoke__">IN</span> (<span class="string">&#x27;a&#x27;</span>)       THEN <span class="string">&#x27;第二类&#x27;</span></span><br><span class="line">ELSE<span class="string">&#x27;其他&#x27;</span> END <span class="keyword">as</span> <span class="string">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<h2 id="空值的处理"><a href="#空值的处理" class="headerlink" title="空值的处理"></a>空值的处理</h2><h3 id="if"><a href="#if" class="headerlink" title="if"></a>if</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT IF(sva=1,&quot;男&quot;,&quot;女&quot;) AS s FROM table_name </span><br><span class="line">WHERE sva != &#x27;&#x27;;</span><br></pre></td></tr></table></figure>
<h3 id="ifnull"><a href="#ifnull" class="headerlink" title="ifnull"></a>ifnull</h3><p>IFNULL(expr1,expr2)，如果expr1的值为null，则返回expr2的值，如果expr1的值不为null，则返回expr1的值。</p>
<h3 id="isnull"><a href="#isnull" class="headerlink" title="isnull"></a>isnull</h3><p>ISNULL(<em>expression</em>)</p>
<p>ISNULL(expr)，如果expr的值为null，则返回1，如果expr1的值不为null，则返回0。</p>
<h3 id="NULLIF-函数的使用"><a href="#NULLIF-函数的使用" class="headerlink" title="NULLIF()函数的使用"></a>NULLIF()函数的使用</h3><p>NULLIF(expr1,expr2)，如果expr1=expr2成立，那么返回值为null，否则返回值为expr1的值。</p>
<h3 id="case-when"><a href="#case-when" class="headerlink" title="case when"></a>case when</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT CASE sva</span><br><span class="line">WHEN 1 THEN &#x27;男&#x27; </span><br><span class="line">　　ELSE &#x27;女&#x27; END AS s FROM table_name</span><br><span class="line">WHERE sva != &#x27;&#x27;;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT CASE 1 </span><br><span class="line">WHEN 1 THEN &#x27;one&#x27;</span><br><span class="line">WHEN 2 THEN &#x27;two&#x27; </span><br><span class="line">   ELSE &#x27;more&#x27; END AS test</span><br></pre></td></tr></table></figure>
<h2 id="统计"><a href="#统计" class="headerlink" title="统计"></a>统计</h2><p>count(*) count(1)</p>
<p>coutn(列)</p>
<p>count()</p>
<h2 id="时间"><a href="#时间" class="headerlink" title="时间"></a>时间</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">datediff(```date```,``&#x27;2025-10-15&#x27;``)&gt;0</span><br></pre></td></tr></table></figure>
<h3 id="格式"><a href="#格式" class="headerlink" title="格式"></a>格式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">SQL Date 数据类型</span><br><span class="line">MySQL 使用下列数据类型在数据库中存储日期或日期/时间值：</span><br><span class="line"></span><br><span class="line">DATE - 格式 YYYY-MM-DD</span><br><span class="line">DATETIME - 格式: YYYY-MM-DD HH:MM:SS</span><br><span class="line">TIMESTAMP - 格式: YYYY-MM-DD HH:MM:SS</span><br><span class="line">YEAR - 格式 YYYY 或 YY</span><br><span class="line">SQL Server 使用下列数据类型在数据库中存储日期或日期/时间值：</span><br><span class="line"></span><br><span class="line">DATE - 格式 YYYY-MM-DD</span><br><span class="line">DATETIME - 格式: YYYY-MM-DD HH:MM:SS</span><br><span class="line">SMALLDATETIME - 格式: YYYY-MM-DD HH:MM:SS</span><br><span class="line">TIMESTAMP - 格式: 唯一的数字</span><br></pre></td></tr></table></figure>
<p>DATEDIFF ( datepart , startdate , enddate )</p>
<p><img src="https://iknow-pic.cdn.bcebos.com/eaf81a4c510fd9f9d19723c3202dd42a2934a493?x-bce-process%3Dimage%2Fresize%2Cm_lfit%2Cw_600%2Ch_800%2Climit_1%2Fquality%2Cq_85%2Fformat%2Cf_jpg" alt="img"></p>
<h3 id="文本和日期转化"><a href="#文本和日期转化" class="headerlink" title="文本和日期转化"></a>文本和日期转化</h3><h4 id="to-date-to-char"><a href="#to-date-to-char" class="headerlink" title="to_date,to_char"></a>to_date,to_char</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select to_char(to_date(&#x27;2002-08-26&#x27;,&#x27;yyyy-mm-dd&#x27;),&#x27;day&#x27;) from dual;     //星期一      </span><br><span class="line">select to_char(to_date(&#x27;2002-08-26&#x27;,&#x27;yyyy-mm-dd&#x27;),&#x27;day&#x27;,</span><br></pre></td></tr></table></figure>
<h3 id="日期比较-1"><a href="#日期比较-1" class="headerlink" title="日期比较"></a>日期比较</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line"> b_table.career_level,</span><br><span class="line"> COUNT (a_table.uid ) </span><br><span class="line">FROM</span><br><span class="line"> &quot;и߼data1&quot; AS a_table</span><br><span class="line"> INNER JOIN &quot;и߼data2&quot; AS b_table ON a_table.uid = b_table.uid </span><br><span class="line">WHERE</span><br><span class="line"> a_table.d &gt;= to_date(&#x27;2021-01-01&#x27;, &#x27;YYYY-MM-DD&#x27;) </span><br><span class="line"> AND a_table.d &lt;= to_date(&#x27;2021-01-31&#x27;, &#x27;YYYY-MM-DD&#x27;) </span><br><span class="line">GROUP BY</span><br><span class="line"> b_table.career_level;</span><br></pre></td></tr></table></figure>
<h3 id="更改数据类型"><a href="#更改数据类型" class="headerlink" title="更改数据类型"></a>更改数据类型</h3><h4 id="CAST-expression-AS-TYPE-函数可以将任何类型的值转换为具有指定类型的值-利用该函数可以直接在数据库层处理部分因数据类型引起的问题。"><a href="#CAST-expression-AS-TYPE-函数可以将任何类型的值转换为具有指定类型的值-利用该函数可以直接在数据库层处理部分因数据类型引起的问题。" class="headerlink" title="CAST(expression AS TYPE) 函数可以将任何类型的值转换为具有指定类型的值,利用该函数可以直接在数据库层处理部分因数据类型引起的问题。"></a>CAST(expression AS TYPE) 函数可以将任何类型的值转换为具有指定类型的值,利用该函数可以直接在数据库层处理部分因数据类型引起的问题。</h4><p>SELECT CAST( 1231 AS BINARY ) AS result </p>
<p>SELECT CAST(1995 AS CHAR) as result</p>
<p>SELECT CAST(‘2019-08-29 16:50:21’ as date) as result</p>
<h3 id="Data-操作函数"><a href="#Data-操作函数" class="headerlink" title="Data 操作函数"></a>Data 操作函数</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">函数</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/sql/func_now.asp">NOW()</a></td>
<td style="text-align:left">返回当前的日期和时间</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/sql/func_curdate.asp">CURDATE()</a></td>
<td style="text-align:left">返回当前的日期</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/sql/func_curtime.asp">CURTIME()</a></td>
<td style="text-align:left">返回当前的时间</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/sql/func_date.asp">DATE()</a></td>
<td style="text-align:left">提取日期或日期/时间表达式的日期部分</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/sql/func_extract.asp">EXTRACT()</a></td>
<td style="text-align:left">返回日期/时间按的单独部分</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/sql/func_date_add.asp">DATE_ADD()</a></td>
<td style="text-align:left">给日期添加指定的时间间隔</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/sql/func_date_sub.asp">DATE_SUB()</a></td>
<td style="text-align:left">从日期减去指定的时间间隔</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/sql/func_datediff_mysql.asp">DATEDIFF()</a></td>
<td style="text-align:left">返回两个日期之间的天数</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/sql/func_date_format.asp">DATE_FORMAT()</a></td>
<td style="text-align:left">用不同的格式显示日期/时间</td>
</tr>
</tbody>
</table>
</div>
<h4 id="datediff-日期差"><a href="#datediff-日期差" class="headerlink" title="datediff 日期差"></a>datediff 日期差</h4><ol>
<li>datediff 返回跨两个指定日期的日期和时间边界数。<br>select datediff(day,’2004-09-01’,’2004-09-18’)   —返回：17</li>
</ol>
<p>datediff(日期1, 日期2)：</p>
<p>得到的结果是日期1与日期2相差的天数。</p>
<p>如果日期1比日期2大，结果为正；如果日期1比日期2小，结果为负。</p>
<p>timestampdiff(时间类型, 日期1, 日期2)</p>
<p>这个函数和上面diffdate的正、负号规则刚好相反。</p>
<p>日期1大于日期2，结果为负，日期1小于日期2，结果为正。</p>
<h4 id="dateadd-日期加减-dateadd-type-增加值，日期基础"><a href="#dateadd-日期加减-dateadd-type-增加值，日期基础" class="headerlink" title="dateadd 日期加减 dateadd(type, 增加值，日期基础)"></a>dateadd 日期加减 dateadd(type, 增加值，日期基础)</h4><p>DATEADD(datepart,number,date)</p>
<p>datepart：y-年份，m-月份，d-日期<br>date 参数是合法的日期表达式。number 是您希望添加的间隔数；对于未来的时间，此数是正数，对于过去的时间，此数是负数。</p>
<p>例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select DATEADD(m,1,getdate()),DATEADD(m,1,CONVERT(datetime,&#x27;08/01/2019&#x27;,101))</span><br></pre></td></tr></table></figure>
<h4 id="datepart-提取日期中的年月日-datepart-m-y-d-日期"><a href="#datepart-提取日期中的年月日-datepart-m-y-d-日期" class="headerlink" title="datepart 提取日期中的年月日(datepart(m/y/d), 日期)"></a><strong>datepart 提取日期中的年月日</strong>(datepart(m/y/d), 日期)</h4><h4 id="day-month-year-—可以与datepart对照一下"><a href="#day-month-year-—可以与datepart对照一下" class="headerlink" title="day(), month(),year() —可以与datepart对照一下"></a>day(), month(),year() —可以与datepart对照一下</h4><ol>
<li>datepart 返回代表指定日期的指定日期部分的整数。<br>SELECT DATEPART(month, ‘2004-10-15’)  —返回 10</li>
</ol>
<p><strong>DATEPART(param,date)</strong></p>
<p><img src="https://img2018.cnblogs.com/blog/1206977/201911/1206977-20191101141406910-243495753.png" alt="img"></p>
<h4 id="提取字符串"><a href="#提取字符串" class="headerlink" title="提取字符串"></a>提取字符串</h4><ol>
<li>datename 返回代表指定日期的指定日期部分的字符串<br>SELECT datename(weekday, ‘2004-10-15’)  —返回：星期五</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">在SQL数据库中，有一类函数是不得不提的，那就是Sql Server日期时间函数，这是Sql Server处理日期和时间最常用的函数，下面就将为介绍这类函数。</span><br><span class="line"></span><br><span class="line">Sql Server日期与时间函数:</span><br><span class="line">.  当前系统日期、时间</span><br><span class="line">    select getdate() </span><br><span class="line"></span><br><span class="line">2. dateadd  在向指定日期加上一段时间的基础上，返回新的 datetime 值</span><br><span class="line">   例如：向日期加上2天</span><br><span class="line">   select dateadd(day,2,&#x27;2004-10-15&#x27;)  --返回：2004-10-17 00:00:00.000</span><br><span class="line"></span><br><span class="line">3. datediff 返回跨两个指定日期的日期和时间边界数。</span><br><span class="line">   select datediff(day,&#x27;2004-09-01&#x27;,&#x27;2004-09-18&#x27;)   --返回：17</span><br><span class="line"></span><br><span class="line">4. datepart 返回代表指定日期的指定日期部分的整数。</span><br><span class="line">  SELECT DATEPART(month, &#x27;2004-10-15&#x27;)  --返回 10</span><br><span class="line"></span><br><span class="line">5. datename 返回代表指定日期的指定日期部分的字符串</span><br><span class="line">   SELECT datename(weekday, &#x27;2004-10-15&#x27;)  --返回：星期五</span><br><span class="line"></span><br><span class="line">6. day(), month(),year() --可以与datepart对照一下</span><br><span class="line"></span><br><span class="line">select 当前日期=convert(varchar(10),getdate(),120)</span><br><span class="line">,当前时间=convert(varchar(8),getdate(),114)</span><br><span class="line"></span><br><span class="line">select datename(dw,&#x27;2004-10-15&#x27;)</span><br><span class="line"></span><br><span class="line">select 本年第多少周=datename(week,&#x27;2004-10-15&#x27;)</span><br><span class="line">      ,今天是周几=datename(weekday,&#x27;2004-10-15&#x27;)#p#</span><br><span class="line"></span><br><span class="line">Sql Server日期函数 参数/功能</span><br><span class="line">GetDate( )  返回系统目前的日期与时间</span><br><span class="line">DateDiff (interval,date1,date2) 以interval 指定的方式，返回date2 与date1两个日期之间的差值 date2-date1</span><br><span class="line">DateAdd (interval,number,date) 以interval指定的方式，加上number之后的日期</span><br><span class="line">DatePart (interval,date) 返回日期date中，interval指定部分所对应的整数值</span><br><span class="line">DateName (interval,date) 返回日期date中，interval指定部分所对应的字符串名称</span><br><span class="line"></span><br><span class="line">参数 interval的设定值如下：</span><br><span class="line"></span><br><span class="line">值 缩 写（Sql Server） (Access 和 ASP) 说明</span><br><span class="line">Year Yy yyyy 年 1753 ~ 9999</span><br><span class="line">Quarter Qq q   季 1 ~ 4</span><br><span class="line">Month Mm m   月1 ~ 12</span><br><span class="line">Day of year Dy y  一年的日数,一年中的第几日 1-366</span><br><span class="line">Day Dd d   日，1-31</span><br><span class="line">Weekday Dw w 一周的日数，一周中的第几日 1-7</span><br><span class="line">Week Wk ww  周，一年中的第几周 0 ~ 51</span><br><span class="line">Hour Hh h   时0 ~ 23</span><br><span class="line">Minute Mi n  分钟0 ~ 59</span><br><span class="line">Second Ss s 秒 0 ~ 59</span><br><span class="line">Millisecond Ms - 毫秒 0 ~ 999</span><br><span class="line"></span><br><span class="line">access 和 asp 中用date()和now()取得系统日期时间；其中DateDiff,DateAdd,DatePart也同是能用于Access和asp中，这些函数的用法也类似</span><br><span class="line"></span><br><span class="line">Sql Server日期函数举例：</span><br><span class="line">1.GetDate() 用于sql server :select GetDate()</span><br><span class="line"></span><br><span class="line">2.DateDiff(&#x27;s&#x27;,&#x27;2005-07-20&#x27;,&#x27;2005-7-25 22:56:32&#x27;)返回值为 514592 秒</span><br><span class="line">DateDiff(&#x27;d&#x27;,&#x27;2005-07-20&#x27;,&#x27;2005-7-25 22:56:32&#x27;)返回值为 5 天</span><br><span class="line"></span><br><span class="line">3.DatePart(&#x27;w&#x27;,&#x27;2005-7-25 22:56:32&#x27;)返回值为 2 即星期一(周日为1，周六为7)</span><br><span class="line">DatePart(&#x27;d&#x27;,&#x27;2005-7-25 22:56:32&#x27;)返回值为 25即25号</span><br><span class="line">DatePart(&#x27;y&#x27;,&#x27;2005-7-25 22:56:32&#x27;)返回值为 206即这一年中第206天</span><br><span class="line">DatePart(&#x27;yyyy&#x27;,&#x27;2005-7-25 22:56:32&#x27;)返回值为 2005即2005年</span><br></pre></td></tr></table></figure>
<h2 id="连续-1"><a href="#连续-1" class="headerlink" title="连续"></a>连续</h2><p><strong>连续3天登录用户</strong></p>
<h4 id="关键性思路"><a href="#关键性思路" class="headerlink" title="关键性思路"></a>关键性思路</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. 窗口函数排序，rank()</span><br><span class="line">2. 相减（新变量）</span><br><span class="line">3. 分组新变量</span><br></pre></td></tr></table></figure>
<p><img src="https://mmbiz.qpic.cn/mmbiz/1OYP1AZw0W3tSUvjyS5cAyXmHujLfFa9Nx5d8OQokkByCJDol5JspFxKsbia9FRJ8ANcHFqcdPI2bdLVSpODPGw/640?wx_fmt=other&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz/1OYP1AZw0W3tSUvjyS5cAyXmHujLfFa97gYf9gzDQG7UiczUibHqbo8tnvODSkEuXBPybu4PTeHA1DR5u1080PfQ/640?wx_fmt=other&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<h3 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h2><h2 id="技巧"><a href="#技巧" class="headerlink" title="技巧"></a>技巧</h2><h3 id="去重"><a href="#去重" class="headerlink" title="去重"></a>去重</h3><p>distinct</p>
<h3 id="limit"><a href="#limit" class="headerlink" title="limit"></a>limit</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">limit子句用于限制查询结果返回的数量。</span><br><span class="line"></span><br><span class="line">用法：【select * from tableName limit i,n 】</span><br><span class="line"></span><br><span class="line">参数：</span><br><span class="line"></span><br><span class="line">tableName : 为数据表；</span><br><span class="line">i : 为查询结果的索引值（默认从0开始）；下标是0</span><br><span class="line">n : 为查询结果返回的数量</span><br></pre></td></tr></table></figure>
<h2 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h2><p>可以单独用</p>
<p>可以放在select</p>
<p>可以放在group by</p>
<h2 id="窗口函数"><a href="#窗口函数" class="headerlink" title="窗口函数"></a>窗口函数</h2><h2 id="函数列表"><a href="#函数列表" class="headerlink" title="函数列表"></a>函数列表</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">分类</th>
<th style="text-align:left">函数名称</th>
<th style="text-align:left">语法</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">聚合函数</td>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://help.aliyun.com/document_detail/63972.html#section-42t-cj8-nio">聚合函数</a></td>
<td style="text-align:left">无</td>
<td style="text-align:left">所有聚合函数都支持在窗口函数中使用。聚合函数列表请参见<a target="_blank" rel="noopener" href="https://help.aliyun.com/document_detail/63445.htm#LogService-user-guide-0103">聚合函数</a>。</td>
</tr>
<tr>
<td style="text-align:left">排名函数</td>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://help.aliyun.com/document_detail/63972.html#section-6dk-2dm-t9u">cume_dist函数</a></td>
<td style="text-align:left">cume_dist()</td>
<td style="text-align:left">统计窗口分区内各个值的累计分布。即计算窗口分区内值小于等于当前值的行数占窗口内总行数的比例。返回值范围为(0,1]。</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://help.aliyun.com/document_detail/63972.html#section-2sg-x7c-k6i">dense_rank函数</a></td>
<td style="text-align:left">dense_rank()</td>
<td style="text-align:left">窗口分区内值的排名。相同值拥有相同的排名，排名是连续的，例如有两个相同值的排名为1，则下一个值的排名为2。</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://help.aliyun.com/document_detail/63972.html#section-rbj-f90-1j7">ntile函数</a></td>
<td style="text-align:left">ntile(n)</td>
<td style="text-align:left">将窗口分区内数据按照顺序分成N组。</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://help.aliyun.com/document_detail/63972.html#section-1yc-nyu-obp">percent_rank函数</a></td>
<td style="text-align:left">percent_rank()</td>
<td style="text-align:left">计算窗口分区内各行的百分比排名。</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://help.aliyun.com/document_detail/63972.html#section-slw-cpg-1lp">rank函数</a></td>
<td style="text-align:left">rank()</td>
<td style="text-align:left">窗口分区内值的排名。相同值拥有相同的排名，排名不是连续的，例如有两个相同值的排名为1，则下一个值的排名为3。</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://help.aliyun.com/document_detail/63972.html#section-9a0-6yn-3kg">row_number函数</a></td>
<td style="text-align:left">row_number()</td>
<td style="text-align:left">窗口分区内值的排名。每个值拥有唯一的序号，从1开始。三个相同值的排名为1、2、3。</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">偏移函数</td>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://help.aliyun.com/document_detail/63972.html#section-ddv-1t7-per">first_value函数</a></td>
<td style="text-align:left">first_value(x)</td>
<td style="text-align:left">返回各个窗口分区内第一行的值。</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://help.aliyun.com/document_detail/63972.html#section-rdr-pgb-fvf">last_value函数</a></td>
<td style="text-align:left">last_value(x)</td>
<td style="text-align:left">返回各个窗口分区内最后一行的值。</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://help.aliyun.com/document_detail/63972.html#section-ugb-0vt-tdz">lag函数</a></td>
<td style="text-align:left">lag(x, offset, defaut_value)</td>
<td style="text-align:left">返回窗口分区内位于当前行上方第offset行的值。如果不存在该行，则返回defaut_value。</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://help.aliyun.com/document_detail/63972.html#section-pu9-9ch-j9k">lead函数</a></td>
<td style="text-align:left">lead(x, offset, defaut_value)</td>
<td style="text-align:left">返回窗口分区内位于当前行下方第offset行的值。如果不存在该行，则返回defaut_value。</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://help.aliyun.com/document_detail/63972.html#section-578-lim-ujg">nth_value函数</a></td>
<td style="text-align:left">nth_value(x, offset)</td>
<td style="text-align:left">返回窗口分区中第offset行的值。</td>
</tr>
</tbody>
</table>
</div>
<p><strong>窗口函数仅仅只会将结果附加到当前的结果上，它不会对已有的行或列做任何修改</strong>。</p>
<ul>
<li><strong>聚合（Aggregate）</strong>：<code>AVG()</code>, <code>COUNT()</code>, <code>MIN()</code>, <code>MAX()</code>, <code>SUM()</code>…</li>
<li><strong>取值（Value）</strong>：<code>FIRST_VALUE()</code>, <code>LAST_VALUE()</code>, <code>LEAD()</code>, <code>LAG()</code>…</li>
<li><strong>排序（Ranking）</strong>：<code>RANK()</code>, <code>DENSE_RANK()</code>, <code>ROW_NUMBER()</code>, <code>NTILE()</code>…</li>
</ul>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select *,</span><br><span class="line">   rank() over (partition by 班级</span><br><span class="line">                 order by 成绩 desc) as ranking</span><br><span class="line">from 班级表</span><br></pre></td></tr></table></figure>
<h3 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">排名问题：每个部门按业绩来排名</span><br><span class="line">topN问题：找出每个部门排名前N的员工进行奖励</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;窗口函数&gt; over (partition by &lt;用于分组的列名&gt;</span><br><span class="line">                order by &lt;用于排序的列名&gt;)</span><br></pre></td></tr></table></figure>
<p>partition子句可是省略，省略就是不指定分组，结果如下，只是按成绩由高到低进行了排序：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select *,</span><br><span class="line">   rank() over (order by 成绩 desc) as ranking</span><br><span class="line">from 班级表</span><br></pre></td></tr></table></figure>
<h3 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">窗口函数的基本语法如下：</span><br><span class="line"></span><br><span class="line">&lt;窗口函数&gt; over (partition by &lt;用于分组的列名&gt;</span><br><span class="line">                order by &lt;用于排序的列名&gt;)</span><br><span class="line">那么语法中的&lt;窗口函数&gt;都有哪些呢？</span><br><span class="line"></span><br><span class="line">&lt;窗口函数&gt;的位置，可以放以下两种函数：</span><br><span class="line"></span><br><span class="line">1） 专用窗口函数，包括后面要讲到的rank, dense_rank, row_number等专用窗口函数。</span><br><span class="line"></span><br><span class="line">2） 聚合函数，如sum. avg, count, max, min等</span><br><span class="line"></span><br><span class="line">因为窗口函数是对where或者group by子句处理后的结果进行操作，所以窗口函数原则上只能写在select子句中。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">简单来说，窗口函数有以下功能：</span><br><span class="line"></span><br><span class="line">1）同时具有分组和排序的功能</span><br><span class="line"></span><br><span class="line">2）不减少原表的行数</span><br><span class="line"></span><br><span class="line">3）语法如下：</span><br><span class="line"></span><br><span class="line">&lt;窗口函数&gt; over (partition by &lt;用于分组的列名&gt;</span><br><span class="line">                order by &lt;用于排序的列名&gt;)</span><br></pre></td></tr></table></figure>
<h3 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select *,</span><br><span class="line">   rank() over (partition by 班级</span><br><span class="line">                 order by 成绩 desc) as ranking</span><br><span class="line">from 班级表</span><br></pre></td></tr></table></figure>
<p>我们来解释下这个sql语句里的select子句。rank是排序的函数。要求是“每个班级内按成绩排名”，这句话可以分为两部分：</p>
<p>1）每个班级内：按班级分组</p>
<p><strong>partition by用来对表分组</strong>。在这个例子中，所以我们指定了按“班级”分组（partition by 班级）<br>2）按成绩排名</p>
<p><strong>order by子句的功能是对分组后的结果进行排序</strong>，默认是按照升序（asc）排列。在本例中（order by 成绩 desc）是按成绩这一列排序，加了desc关键词表示降序排列。</p>
<p>通过下图，我们就可以理解partiition by（分组）和order by（在组内排序）的作用了。</p>
<p>窗口函数具备了我们之前学过的group by子句分组的功能和order by子句排序的功能。那么，为什么还要用窗口函数呢？</p>
<p>这是因为，<strong>group by分组汇总后改变了表的行数，一行只有一个类别。而partiition by和rank函数不会减少原表中的行数</strong>。例如下面统计每个班级的人数。</p>
<h3 id="专用窗口函数rank-dense-rank-row-number"><a href="#专用窗口函数rank-dense-rank-row-number" class="headerlink" title="专用窗口函数rank, dense_rank, row_number"></a>专用窗口函数rank, dense_rank, row_number</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select *,</span><br><span class="line">   rank() over (order by 成绩 desc) as ranking,</span><br><span class="line">   dense_rank() over (order by 成绩 desc) as dese_rank,</span><br><span class="line">   row_number() over (order by 成绩 desc) as row_num</span><br><span class="line">from 班级表</span><br></pre></td></tr></table></figure>
<p><img src="https://pic2.zhimg.com/80/v2-ad1d86f5a5b9f0ef684907b20b341099_720w.jpg" alt="img"></p>
<p><img src="https://pic3.zhimg.com/80/v2-7b63c571dfa285c0aa0c8f944ca89482_720w.jpg" alt="img"></p>
<h3 id="更常见的方法"><a href="#更常见的方法" class="headerlink" title="更常见的方法"></a>更常见的方法</h3><h5 id="LEAD和LAG，这两个函数都是用来计算偏移量的分析函数，这两个函数的用法相同。"><a href="#LEAD和LAG，这两个函数都是用来计算偏移量的分析函数，这两个函数的用法相同。" class="headerlink" title="LEAD和LAG，这两个函数都是用来计算偏移量的分析函数，这两个函数的用法相同。"></a>LEAD和LAG，这两个函数都是用来计算偏移量的分析函数，这两个函数的用法相同。</h5><p>LEAD函数是一个分析函数，它可以在不用自连接的情况下，同时访问一个表的多行数据。查询返回的一系列的数据行和游标，LEAD函数在当前位置上根据偏移量访问该表中的另一行数据。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">lead(e.hiredate,1(偏移量，默认1）,null（如果超过了）) over(partition by e.deptno order by e.hiredate) as next_hiredate  </span><br><span class="line"></span><br><span class="line">--5、lead函数的default参数  </span><br><span class="line">select e.empno,  </span><br><span class="line">       e.ename,  </span><br><span class="line">       e.deptno,  </span><br><span class="line">       e.hiredate,  </span><br><span class="line">       lead(e.hiredate,1,to_date(&#x27;2013-01-01&#x27;,&#x27;yyyy-MM-dd&#x27;)) over(partition by e.deptno order by e.hiredate) as next_hiredate  </span><br><span class="line">from emp e  </span><br><span class="line">where deptno=30;  </span><br></pre></td></tr></table></figure>
<p><img src="https://mmbiz.qpic.cn/mmbiz/1OYP1AZw0W3tSUvjyS5cAyXmHujLfFa93MKeQLibXS0JeqQP7GoTE5Z9L5AyCJoptyZsewuKciaXMibmz2OSYP3Og/640?wx_fmt=other&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<h1 id="窗口函数-1"><a href="#窗口函数-1" class="headerlink" title="窗口函数"></a>窗口函数</h1><p><strong>四.总结</strong></p>
<p><strong>1.窗口函数语法</strong></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;窗口函数&gt; over (partition by &lt;用于分组的列名&gt;</span><br><span class="line">                order by &lt;用于排序的列名&gt;)</span><br></pre></td></tr></table></figure>
<p>&lt;窗口函数&gt;的位置，可以放以下两种函数：</p>
<p>1） 专用窗口函数，比如rank, dense_rank, row_number等</p>
<p>2） 聚合函数，如sum. avg, count, max, min等</p>
<p><strong>2.窗口函数有以下功能：</strong></p>
<p>1）同时具有分组（partition by）和排序（order by）的功能</p>
<p>2）不减少原表的行数，所以经常用来在每组内排名</p>
<p><strong>3.注意事项</strong></p>
<p>窗口函数原则上只能写在select子句中</p>
<p><strong>4.窗口函数使用场景</strong></p>
<p>1）业务需求“<strong>在每组内排名”</strong>，比如：</p>
<blockquote>
<p>排名问题：每个部门按业绩来排名<br>topN问题：找出每个部门排名前N的员工进行奖励</p>
</blockquote>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/rfaNuFeWzwDHicVppcn3zqs3KdvibEXJW7plQCCOZzNDxoSs1luiafuTqA4kkiaGk8DoP5MlQDib9GS29DvHsTaIIaw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片" style="zoom:33%;"></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/rfaNuFeWzwDHicVppcn3zqs3KdvibEXJW7TXfSLE4UOhfch0DgHlHInViaVsMsyYvzGS4cUWGnfgk0LAOPUpWb6jg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片" style="zoom:50%;"></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/rfaNuFeWzwDHicVppcn3zqs3KdvibEXJW7hkXZFfUHia6uia0OvoI2tZ3N87UTqVLWz6EfXHZ8dMwudXHNIxtA5yFQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片" style="zoom:50%;"></p>
<h1 id="连接"><a href="#连接" class="headerlink" title="连接"></a>连接</h1><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">表1 连接方式 表2 on</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">where 表1， 表2， where </span><br></pre></td></tr></table></figure>
<h3 id="多次连接"><a href="#多次连接" class="headerlink" title="多次连接"></a>多次连接</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">select dept_emp.dept_no, departments.dept_name, count(salaries.emp_no ) sum from </span><br><span class="line">    salaries left join dept_emp </span><br><span class="line">        on salaries.emp_no = dept_emp.emp_no</span><br><span class="line">    left join departments on dept_emp.dept_no = departments.dept_no</span><br><span class="line">    group by dept_emp.dept_no  order by sum desc</span><br><span class="line">    </span><br></pre></td></tr></table></figure>
<h3 id="内连接"><a href="#内连接" class="headerlink" title="内连接"></a>内连接</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT Persons.LastName, Persons.FirstName, Orders.OrderNo</span><br><span class="line">FROM Persons, Orders</span><br><span class="line">WHERE Persons.Id_P = Orders.Id_P </span><br></pre></td></tr></table></figure>
<h3 id="外连接"><a href="#外连接" class="headerlink" title="外连接"></a>外连接</h3><h3 id="自连接"><a href="#自连接" class="headerlink" title="自连接"></a>自连接</h3><h3 id="交叉连接"><a href="#交叉连接" class="headerlink" title="交叉连接"></a>交叉连接</h3><p>交叉联结（corss join）</p>
<h1 id="单行函数"><a href="#单行函数" class="headerlink" title="单行函数"></a>单行函数</h1><h2 id="数值函数"><a href="#数值函数" class="headerlink" title="数值函数"></a>数值函数</h2><p>abs()</p>
<p>sign()</p>
<p>cell() round() floor() mod(x,y) rand(),</p>
<h2 id="字符串函数"><a href="#字符串函数" class="headerlink" title="字符串函数"></a>字符串函数</h2><h2 id="日期和时间函数"><a href="#日期和时间函数" class="headerlink" title="日期和时间函数"></a>日期和时间函数</h2><h3 id="4-1-获取日期和时间"><a href="#4-1-获取日期和时间" class="headerlink" title="4.1 获取日期和时间"></a>4.1 获取日期和时间</h3><p>curtdate()</p>
<p>curtime()</p>
<p>now()</p>
<h3 id="4-2-日期和时间戳的转换"><a href="#4-2-日期和时间戳的转换" class="headerlink" title="4.2 日期和时间戳的转换"></a>4.2 日期和时间戳的转换</h3><h3 id="4-3-获取月份，星期，天数等等函数"><a href="#4-3-获取月份，星期，天数等等函数" class="headerlink" title="4.3 获取月份，星期，天数等等函数"></a>4.3 获取月份，星期，天数等等函数</h3><p>Year() Month() day()</p>
<h3 id="4-4-日期的操作函数"><a href="#4-4-日期的操作函数" class="headerlink" title="4.4 日期的操作函数"></a>4.4 日期的操作函数</h3><p>extract(type from date)</p>
<p>extract(day from now()), extract(hour from now())</p>
<h3 id="4-5-时间和秒数的转换"><a href="#4-5-时间和秒数的转换" class="headerlink" title="4.5 时间和秒数的转换"></a>4.5 时间和秒数的转换</h3><p>select TIME_TO_SEC(curtime()), sec_to_time(83345)</p>
<p>from 表；</p>
<h4 id="4-6-计算日期和时间的函数"><a href="#4-6-计算日期和时间的函数" class="headerlink" title="4.6 计算日期和时间的函数"></a>4.6 计算日期和时间的函数</h4><p>date_add(datetime, Interval expr type)</p>
<p>date_sub(date,)</p>
<p>adddate(date, )</p>
<p>select date_add(Now(), Interval 1 year),date_add(Now(), Interval -1 year),</p>
<p>date_sub(now(), interval -1 hour)</p>
<p>from</p>
<h2 id="流程控制函数"><a href="#流程控制函数" class="headerlink" title="流程控制函数"></a>流程控制函数</h2><p>if(value, value, value)</p>
<p>ifnull(value1, value2)</p>
<p>case()  case then (不加逗号） else  end</p>
<h1 id="题库"><a href="#题库" class="headerlink" title="题库"></a>题库</h1><h2 id="select"><a href="#select" class="headerlink" title="select"></a>select</h2><h3 id="where"><a href="#where" class="headerlink" title="where"></a>where</h3><ol>
<li>如果使用in可放入select </li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select emp_no </span><br><span class="line">from employees</span><br><span class="line">where emp_no not in (select distinct emp_no from dept_manager)</span><br></pre></td></tr></table></figure>
<h3 id="排名-窗口函数新增一列"><a href="#排名-窗口函数新增一列" class="headerlink" title="排名(窗口函数新增一列)"></a>排名(窗口函数新增一列)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">select dept_no, emp_no, salary </span><br><span class="line">from </span><br><span class="line">(</span><br><span class="line">select  </span><br><span class="line">    dept_no, </span><br><span class="line">    a.emp_no,</span><br><span class="line">    salary,</span><br><span class="line">    row_number()  over( partition  by  dept_no order by salary desc) as ranking</span><br><span class="line">from (</span><br><span class="line">    salaries as a </span><br><span class="line">    inner join </span><br><span class="line">    dept_emp as b </span><br><span class="line">    on a.emp_no = b.emp_no</span><br><span class="line">    )</span><br><span class="line"> )</span><br><span class="line">where ranking =1 </span><br><span class="line">group by dept_no</span><br></pre></td></tr></table></figure>
<h3 id="基础语法"><a href="#基础语法" class="headerlink" title="基础语法"></a>基础语法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">CASE input_expression</span><br><span class="line">WHEN when_expression THEN</span><br><span class="line">    result_expression [...n ] [</span><br><span class="line">ELSE</span><br><span class="line">    else_result_expression</span><br><span class="line">END</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">CASE</span><br><span class="line">WHEN Boolean_expression THEN</span><br><span class="line">    result_expression [...n ] [</span><br><span class="line">ELSE</span><br><span class="line">    else_result_expression</span><br><span class="line">END</span><br></pre></td></tr></table></figure>
<h3 id="配合-count-sum"><a href="#配合-count-sum" class="headerlink" title="配合 count sum"></a>配合 count sum</h3><p>行列互换</p>
<p>group by 行</p>
<p>count/sum列统计</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">COUNT(DISTINCT CASE phoneType WHEN &#x27;iOS&#x27; THEN id END) AS iOSPush,</span><br><span class="line">COUNT(DISTINCT CASE phoneType WHEN &#x27;WeChat&#x27; THEN id END) AS weChatPush,</span><br><span class="line">COUNT(DISTINCT CASE phoneType WHEN &#x27;Android&#x27; THEN id END) AS androidPush,</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="连续几天-自连接（同一列相互"><a href="#连续几天-自连接（同一列相互" class="headerlink" title="连续几天+自连接（同一列相互)"></a>连续几天+自连接（同一列相互)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">select *</span><br><span class="line">from score as a,</span><br><span class="line">   score as b,</span><br><span class="line">   score as c;</span><br><span class="line">   </span><br><span class="line"></span><br><span class="line">select distinct a.成绩 as 最终答案</span><br><span class="line">from score as a,</span><br><span class="line">   score as b,</span><br><span class="line">   score as c;</span><br><span class="line"> where a.学号 = b.学号 - 1</span><br><span class="line">   and b.学号 = c.学号 - 1</span><br><span class="line">   and a.成绩 = b.成绩</span><br><span class="line">   and b.成绩 = c.成绩;</span><br></pre></td></tr></table></figure>
<p><strong>【本题考点】</strong></p>
<p>• 本题考察的是连续出现，会有同学忽略“连续”二字</p>
<p>• 考察对自关联的灵活应用</p>
<p>• 从题目连续3次成绩相等，判断出“成绩相等”和“学号连续”这2个条件。考察构建“连续学号成绩相等”的思维构建能力</p>
<p><strong>【举一反三】</strong></p>
<p>遇到类似“连续出N次的问题”可以回想本题的解答思路，如：查询至少连续3天没有出勤的员工。</p>
<h3 id="行列互换"><a href="#行列互换" class="headerlink" title="行列互换"></a>行列互换</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select 学号,-- 第2步，在行列互换结果表中，其他列里的值分别使用case和max来获取max(case 课程 when &#x27;语文&#x27; then 成绩 else 0 end) as 语文成绩,max(case 课程 when &#x27;数学&#x27; then 成绩 else 0 end) as 数学成绩from 成绩表-- 第1步，在行列互换结果表中按第1列分组group by 学号;</span><br></pre></td></tr></table></figure>
<p>1.考查用case语句进行数据替换，和条件判断</p>
<p>2.遇到行列互换的问题，可以用下面的万能模版来解决。</p>
<h3 id="最大最小的N个数"><a href="#最大最小的N个数" class="headerlink" title="最大最小的N个数"></a>最大最小的N个数</h3><p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=MzAxMTMwNTMxMQ==&amp;mid=2649248455&amp;idx=1&amp;sn=57539b783e2f4a0bdc54c7ca63e162a6&amp;chksm=835fdaf7b42853e19fea0c1ecdf2e62dc70591c37129e3fd53193773ca372c7958b5b450f4b7&amp;cur_album_id=1398781984763428865&amp;scene=189#rd">https://mp.weixin.qq.com/s?__biz=MzAxMTMwNTMxMQ==&amp;mid=2649248455&amp;idx=1&amp;sn=57539b783e2f4a0bdc54c7ca63e162a6&amp;chksm=835fdaf7b42853e19fea0c1ecdf2e62dc70591c37129e3fd53193773ca372c7958b5b450f4b7&amp;cur_album_id=1398781984763428865&amp;scene=189#rd</a></p>
<p><strong>【本题考点】</strong></p>
<p>1.使用<a target="_blank" rel="noopener" href="http://mp.weixin.qq.com/s?__biz=MzAxMTMwNTMxMQ==&amp;mid=2649246563&amp;idx=2&amp;sn=3ffe509999d144d23dec5acc101fc2ef&amp;chksm=835fc353b4284a45ce01391453fe2fec1b225bbd6bbdb67dd7f304aacdd4f21f60d0b27ba309&amp;scene=21#wechat_redirect">逻辑树分析方法</a>将复杂问题变成简单问题的能力</p>
<p>2.当遇到“每个”问题的时候，要想到用分组汇总</p>
<p>3.查询最小n个数据的问题：先排序（order by），然后使用limit取出前n行数据</p>
<p>4.遇到有筛选条件的统计数量问题时，使用case表达式筛选出符合条件的行为1，否则为0。然后用汇总函数（sum）对case表达式输出列求和。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select a.班级,人数,人数占比from 学生表 as a left join 临时表 as bon a.学号=b.学号group by 班级;</span><br></pre></td></tr></table></figure>
<h1 id="注意点"><a href="#注意点" class="headerlink" title="注意点"></a>注意点</h1><h2 id="group-by"><a href="#group-by" class="headerlink" title="group by"></a>group by</h2><p>简而言之：使用GROUP BY子句时，SELECT子句中只能有聚合键、聚合函数、常数。</p>
<h2 id="子查询要取名字"><a href="#子查询要取名字" class="headerlink" title="子查询要取名字"></a>子查询要取名字</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">select emp_no, max(salary), last_name, first_name</span><br><span class="line">from </span><br><span class="line">   </span><br><span class="line">    (select * from </span><br><span class="line">           employees  as a inner join salaries as b </span><br><span class="line">           on a.emp_no = b.emp_no</span><br><span class="line">   ) as c</span><br><span class="line"> where salary&lt; (select max(salary) from salaries)</span><br></pre></td></tr></table></figure>
<h3 id="嵌套查询和查询子集"><a href="#嵌套查询和查询子集" class="headerlink" title="嵌套查询和查询子集"></a>嵌套查询和查询子集</h3><h3 id="统计每年，每月，每年的数据"><a href="#统计每年，每月，每年的数据" class="headerlink" title="统计每年，每月，每年的数据"></a>统计每年，每月，每年的数据</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">1、每年</span><br><span class="line">select year(ordertime) 年，</span><br><span class="line">sum(Total) 销售合计</span><br><span class="line">from 订单表</span><br><span class="line">group by year(ordertime)</span><br><span class="line"> </span><br><span class="line">2、每月</span><br><span class="line">select year(ordertime) 年，</span><br><span class="line">month(ordertime) 月,</span><br><span class="line">sum(Total) 销售合计</span><br><span class="line">from 订单表</span><br><span class="line">group by year(ordertime)，</span><br><span class="line">month(ordertime</span><br><span class="line"> </span><br><span class="line">3、每日</span><br><span class="line">select year(ordertime) 年，</span><br><span class="line">month(ordertime) 月,</span><br><span class="line">day(ordertime) 日，</span><br><span class="line">sum(Total) 销售合计</span><br><span class="line">from 订单表</span><br><span class="line">group by year(ordertime)，</span><br><span class="line">month(ordertime),</span><br><span class="line">day(ordertime)</span><br><span class="line"> </span><br><span class="line">另外每日也可以这样:</span><br><span class="line">select convert(char(8),ordertime,112) dt，</span><br><span class="line">sum(Total) 销售合计</span><br><span class="line">from 订单表</span><br><span class="line">group by convert(char(8),ordertime,112)</span><br></pre></td></tr></table></figure>
<h2 id="计数重新映射值"><a href="#计数重新映射值" class="headerlink" title="计数重新映射值"></a>计数重新映射值</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT IF(sva=1,&quot;男&quot;,&quot;女&quot;) AS s FROM table_name </span><br><span class="line">WHERE sva != &#x27;&#x27;;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT CASE sva</span><br><span class="line">WHEN 1 THEN &#x27;男&#x27; </span><br><span class="line">　　ELSE &#x27;女&#x27; END AS s FROM table_name</span><br><span class="line">WHERE sva != &#x27;&#x27;;</span><br></pre></td></tr></table></figure>
<p>可以在count, sum中select 中使用</p>
<p>1.考查用case语句进行数据替换，和条件判断</p>
<h2 id="select-top"><a href="#select-top" class="headerlink" title="select top"></a>select top</h2><p>SELECT TOP 3 * FROM Customers;</p>
<h2 id="sql执行顺序"><a href="#sql执行顺序" class="headerlink" title="sql执行顺序"></a>sql执行顺序</h2><p><img src="/2020/08/20/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E4%B9%8BSQL%E9%9D%A2%E8%AF%95%E9%A2%98/博客/newblog/source/_posts/数据分析之SQL/image-20210601135359672.png" alt="image-20210601135359672"></p>
<p>where:顾虑</p>
<p>group by</p>
<p>having:分组筛选</p>
<p><img src="/2020/08/20/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E4%B9%8BSQL%E9%9D%A2%E8%AF%95%E9%A2%98/博客/newblog/source/_posts/数据分析之SQL/FN9$IYZ7_T}`54_@5_YEAF1.png" alt="img"></p>
<p>执行顺序：from join where group by  haveing: 中  select distinct; order by limit</p>
<h1 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h1><h2 id="基础用法"><a href="#基础用法" class="headerlink" title="基础用法"></a>基础用法</h2><h3 id="第一层"><a href="#第一层" class="headerlink" title="第一层"></a>第一层</h3><p>select  from  where group by having  order by  limit</p>
<h3 id="第二层"><a href="#第二层" class="headerlink" title="第二层"></a>第二层</h3><p>聚合</p>
<p>分组</p>
<p>子查询</p>
<p>表连接</p>
<h3 id="第三层"><a href="#第三层" class="headerlink" title="第三层"></a>第三层</h3><p>窗口函数</p>
<p>时间函数</p>
<h2 id="运行原理"><a href="#运行原理" class="headerlink" title="运行原理"></a>运行原理</h2><h2 id="准备表格（字段）"><a href="#准备表格（字段）" class="headerlink" title="准备表格（字段）"></a>准备表格（字段）</h2><p>from : 从一下数据库中</p>
<p>​        SQL: 从数据库中找到from后指定的表格，复制一张完全一样的表格用于查询处理</p>
<p>join: 连接表格</p>
<h3 id="是否需要聚合"><a href="#是否需要聚合" class="headerlink" title="是否需要聚合"></a>是否需要聚合</h3><h3 id="函数处理"><a href="#函数处理" class="headerlink" title="函数处理"></a>函数处理</h3><h3 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h3><p>要用（）包括起来</p>
<p>（）别名</p>
<h4 id="位置"><a href="#位置" class="headerlink" title="位置"></a>位置</h4><p>from</p>
<p>where</p>
<p>join</p>
<p>having </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://bealittlestar.github.io/2020/08/20/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E4%B9%8BSQL%E9%9D%A2%E8%AF%95%E9%A2%98/" data-id="clps9wi300089xwvkary87ibw" data-title="数据分析之SQL面试题" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../../../tags/SQl/" rel="tag">SQl</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="../../21/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E4%B9%8B%E9%9D%A2%E8%AF%95dayday/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          数据分析之面试dayday
        
      </div>
    </a>
  
  
    <a href="../../18/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E4%B9%8B%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">数据分析之项目实战</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="../../../../categories/Book/">Book</a></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/Categories/">Categories</a></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/Deep-Learning/">Deep Learning</a></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/R/">R</a></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/machine-learning/">machine learning</a></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/%E5%A8%B1%E4%B9%90%E7%94%9F%E6%B4%BB/">娱乐生活</a></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/%E5%AD%A6%E4%B9%A0%E3%81%AE%E5%8E%86%E7%A8%8B-Journal-of-Studying/">学习の历程(Journal of Studying)</a></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/%E5%BF%83%E5%BE%97/">心得</a></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/%E6%80%9D%E7%BB%B4/">思维</a></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/%E6%95%B0%E5%AD%A6/">数学</a></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/">数据分析</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="../../../../categories/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">编程语言</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/">数据可视化</a></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98/">数据挖掘</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="../../../../categories/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/">数据分析</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6-Data-Science/">数据科学(Data Science)</a></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/%E6%95%B0%E7%90%86%E7%BB%9F%E8%AE%A1/">数理统计</a></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">机器学习</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="../../../../categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%95%B0%E5%AD%A6/">数学</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/%E6%9D%82%E9%A1%B9/">杂项</a></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">深度学习</a></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/%E7%94%9F%E6%B4%BB%E6%94%BB%E7%95%A5/">生活攻略</a></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/%E7%A7%91%E6%99%AE/">科普</a></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/%E7%A7%91%E7%A0%94/">科研</a></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/%E7%AB%9E%E8%B5%9B/">竞赛</a></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/%E7%BB%9F%E8%AE%A1%E5%AD%A6/">统计学</a></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">编程语言</a></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/%E8%8B%B1%E8%AF%AD/">英语</a></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/%E8%A7%84%E5%88%92/">规划</a></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/%E8%A7%86%E9%A2%91%E5%AD%A6%E4%B9%A0/">视频学习</a></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/%E8%AE%A1%E9%87%8F%E7%BB%8F%E6%B5%8E%E5%AD%A6/">计量经济学</a></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/%E8%AF%BB%E4%B9%A6%E6%97%A5%E5%B8%B8/">读书日常</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/1/" rel="tag">1</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/BI/" rel="tag">BI</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/BP/" rel="tag">BP</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/Boosting-AdaBoost/" rel="tag">Boosting, AdaBoost</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/Categories/" rel="tag">Categories</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/Daily/" rel="tag">Daily</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/Data-Mining/" rel="tag">Data Mining</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/Deep-learning/" rel="tag">Deep learning</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/English/" rel="tag">English</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/Excel/" rel="tag">Excel</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/Numpuy/" rel="tag">Numpuy</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/Pandas/" rel="tag">Pandas</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/Python/" rel="tag">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/R/" rel="tag">R</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/SQL/" rel="tag">SQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/SQl/" rel="tag">SQl</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/SVD/" rel="tag">SVD</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/deep-learning/" rel="tag">deep learning</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/df/" rel="tag">df</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/ielts/" rel="tag">ielts</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/linux/" rel="tag">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/logisitics-regression/" rel="tag">logisitics regression</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/machine-learning/" rel="tag">machine learning</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/origin/" rel="tag">origin</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/python/" rel="tag">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/tensorlow/" rel="tag">tensorlow</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/test/" rel="tag">test</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E4%BA%8C%E6%AC%A1%E8%A7%84%E5%88%92/" rel="tag">二次规划</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E4%BA%A4%E5%8F%89%E9%AA%8C%E8%AF%81/" rel="tag">交叉验证</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E5%81%87%E8%AE%BE%E6%A3%80%E9%AA%8C/" rel="tag">假设检验</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E5%85%B3%E8%81%94%E8%A7%84%E5%88%99/" rel="tag">关联规则</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E5%86%B3%E7%AD%96%E6%A0%91/" rel="tag">决策树</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E5%8D%95%E8%AF%8D/" rel="tag">单词</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E5%8D%A1%E6%96%B9%E5%88%86/" rel="tag">卡方分</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E5%8F%AF%E8%A7%86%E5%8C%96/" rel="tag">可视化</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E5%9B%9E%E5%BD%92%E5%88%86%E6%9E%90/" rel="tag">回归分析</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E5%9B%9E%E5%BD%92%E6%A0%91/" rel="tag">回归树</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E5%AE%89%E6%8E%92/" rel="tag">安排</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E5%B8%8C%E8%85%8A%E5%AD%97%E6%AF%8D/" rel="tag">希腊字母</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E5%BD%92%E4%B8%80%E5%8C%96/" rel="tag">归一化</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E5%BD%A9%E9%93%85/" rel="tag">彩铅</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E6%80%9D%E7%BB%B4/" rel="tag">思维</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E6%88%91%E7%9A%84%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" rel="tag">我的读书笔记</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E6%8A%80%E5%B7%A7/" rel="tag">技巧</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E6%8A%80%E8%83%BD/" rel="tag">技能</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E6%8A%BD%E6%A0%B7%E5%88%86%E5%B8%83%E5%87%BD%E6%95%B0/" rel="tag">抽样分布函数</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA/" rel="tag">支持向量机</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA%E5%9B%9E%E5%BD%92/" rel="tag">支持向量机回归</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/" rel="tag">数据分析</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E6%8A%80%E8%83%BD/" rel="tag">数据分析技能</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98/" rel="tag">数据挖掘</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E6%95%B0%E6%8D%AE%E6%8E%A2%E7%B4%A2/" rel="tag">数据探索</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E6%96%B0%E6%A6%82%E5%BF%B5/" rel="tag">新概念</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E6%96%B9%E6%B3%95/" rel="tag">方法</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E6%96%B9%E6%B3%95%E8%AE%BA/" rel="tag">方法论</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E6%97%A5%E5%B8%B8/" rel="tag">日常</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" rel="tag">机器学习</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E6%A0%87%E5%87%86%E5%8C%96/" rel="tag">标准化</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90/" rel="tag">案例分析</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E6%AD%A3%E5%88%99%E5%8C%96/" rel="tag">正则化</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" rel="tag">深度学习</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E7%89%B9%E5%BE%81%E5%B7%A5%E7%A8%8B/" rel="tag">特征工程</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E7%94%9F%E6%B4%BB/" rel="tag">生活</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0%E4%B8%8E%E9%9D%9E%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0/" rel="tag">监督学习与非监督学习</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E7%A4%BE%E4%BC%9A%E7%A7%91%E5%AD%A6/" rel="tag">社会科学</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E7%A7%91%E7%A0%94/" rel="tag">科研</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E7%A7%91%E7%A0%94%E5%B7%A5%E5%85%B7/" rel="tag">科研工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E7%A7%91%E7%A0%94%E7%AC%94%E8%AE%B0/" rel="tag">科研笔记</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E7%AB%9E%E8%B5%9B/" rel="tag">竞赛</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E7%BB%98%E5%9B%BE/" rel="tag">绘图</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E7%BB%9F%E8%AE%A1%E5%AD%A6/" rel="tag">统计学</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E8%83%BD%E5%8A%9B/" rel="tag">能力</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E8%A5%BF%E7%93%9C%E4%B9%A6/" rel="tag">西瓜书</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E8%AE%A1%E9%87%8F%E7%BB%8F%E6%B5%8E%E5%AD%A6/" rel="tag">计量经济学</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E8%AF%BB%E4%B9%A6/" rel="tag">读书</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E8%B4%9D%E5%8F%B6%E6%96%AF%E5%88%86%E7%B1%BB%E5%99%A8/" rel="tag">贝叶斯分类器</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E8%B7%AF%E7%BA%BF/" rel="tag">路线</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E8%BF%90%E8%90%A5/" rel="tag">运营</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E9%9B%85%E6%80%9D/" rel="tag">雅思</a></li><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/%E9%A1%B9%E7%9B%AE/" rel="tag">项目</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="../../../../tags/1/" style="font-size: 10px;">1</a> <a href="../../../../tags/BI/" style="font-size: 11.67px;">BI</a> <a href="../../../../tags/BP/" style="font-size: 10px;">BP</a> <a href="../../../../tags/Boosting-AdaBoost/" style="font-size: 10px;">Boosting, AdaBoost</a> <a href="../../../../tags/Categories/" style="font-size: 10px;">Categories</a> <a href="../../../../tags/Daily/" style="font-size: 18.33px;">Daily</a> <a href="../../../../tags/Data-Mining/" style="font-size: 10px;">Data Mining</a> <a href="../../../../tags/Deep-learning/" style="font-size: 15px;">Deep learning</a> <a href="../../../../tags/English/" style="font-size: 10px;">English</a> <a href="../../../../tags/Excel/" style="font-size: 10px;">Excel</a> <a href="../../../../tags/Numpuy/" style="font-size: 10px;">Numpuy</a> <a href="../../../../tags/Pandas/" style="font-size: 10px;">Pandas</a> <a href="../../../../tags/Python/" style="font-size: 16.67px;">Python</a> <a href="../../../../tags/R/" style="font-size: 10px;">R</a> <a href="../../../../tags/SQL/" style="font-size: 13.33px;">SQL</a> <a href="../../../../tags/SQl/" style="font-size: 10px;">SQl</a> <a href="../../../../tags/SVD/" style="font-size: 10px;">SVD</a> <a href="../../../../tags/deep-learning/" style="font-size: 10px;">deep learning</a> <a href="../../../../tags/df/" style="font-size: 10px;">df</a> <a href="../../../../tags/ielts/" style="font-size: 10px;">ielts</a> <a href="../../../../tags/linux/" style="font-size: 10px;">linux</a> <a href="../../../../tags/logisitics-regression/" style="font-size: 10px;">logisitics regression</a> <a href="../../../../tags/machine-learning/" style="font-size: 11.67px;">machine learning</a> <a href="../../../../tags/origin/" style="font-size: 10px;">origin</a> <a href="../../../../tags/python/" style="font-size: 10px;">python</a> <a href="../../../../tags/tensorlow/" style="font-size: 10px;">tensorlow</a> <a href="../../../../tags/test/" style="font-size: 10px;">test</a> <a href="../../../../tags/%E4%BA%8C%E6%AC%A1%E8%A7%84%E5%88%92/" style="font-size: 10px;">二次规划</a> <a href="../../../../tags/%E4%BA%A4%E5%8F%89%E9%AA%8C%E8%AF%81/" style="font-size: 10px;">交叉验证</a> <a href="../../../../tags/%E5%81%87%E8%AE%BE%E6%A3%80%E9%AA%8C/" style="font-size: 10px;">假设检验</a> <a href="../../../../tags/%E5%85%B3%E8%81%94%E8%A7%84%E5%88%99/" style="font-size: 10px;">关联规则</a> <a href="../../../../tags/%E5%86%B3%E7%AD%96%E6%A0%91/" style="font-size: 11.67px;">决策树</a> <a href="../../../../tags/%E5%8D%95%E8%AF%8D/" style="font-size: 10px;">单词</a> <a href="../../../../tags/%E5%8D%A1%E6%96%B9%E5%88%86/" style="font-size: 10px;">卡方分</a> <a href="../../../../tags/%E5%8F%AF%E8%A7%86%E5%8C%96/" style="font-size: 11.67px;">可视化</a> <a href="../../../../tags/%E5%9B%9E%E5%BD%92%E5%88%86%E6%9E%90/" style="font-size: 10px;">回归分析</a> <a href="../../../../tags/%E5%9B%9E%E5%BD%92%E6%A0%91/" style="font-size: 10px;">回归树</a> <a href="../../../../tags/%E5%AE%89%E6%8E%92/" style="font-size: 10px;">安排</a> <a href="../../../../tags/%E5%B8%8C%E8%85%8A%E5%AD%97%E6%AF%8D/" style="font-size: 10px;">希腊字母</a> <a href="../../../../tags/%E5%BD%92%E4%B8%80%E5%8C%96/" style="font-size: 10px;">归一化</a> <a href="../../../../tags/%E5%BD%A9%E9%93%85/" style="font-size: 10px;">彩铅</a> <a href="../../../../tags/%E6%80%9D%E7%BB%B4/" style="font-size: 18.33px;">思维</a> <a href="../../../../tags/%E6%88%91%E7%9A%84%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" style="font-size: 10px;">我的读书笔记</a> <a href="../../../../tags/%E6%8A%80%E5%B7%A7/" style="font-size: 10px;">技巧</a> <a href="../../../../tags/%E6%8A%80%E8%83%BD/" style="font-size: 11.67px;">技能</a> <a href="../../../../tags/%E6%8A%BD%E6%A0%B7%E5%88%86%E5%B8%83%E5%87%BD%E6%95%B0/" style="font-size: 10px;">抽样分布函数</a> <a href="../../../../tags/%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA/" style="font-size: 10px;">支持向量机</a> <a href="../../../../tags/%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA%E5%9B%9E%E5%BD%92/" style="font-size: 10px;">支持向量机回归</a> <a href="../../../../tags/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/" style="font-size: 20px;">数据分析</a> <a href="../../../../tags/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E6%8A%80%E8%83%BD/" style="font-size: 10px;">数据分析技能</a> <a href="../../../../tags/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98/" style="font-size: 10px;">数据挖掘</a> <a href="../../../../tags/%E6%95%B0%E6%8D%AE%E6%8E%A2%E7%B4%A2/" style="font-size: 10px;">数据探索</a> <a href="../../../../tags/%E6%96%B0%E6%A6%82%E5%BF%B5/" style="font-size: 10px;">新概念</a> <a href="../../../../tags/%E6%96%B9%E6%B3%95/" style="font-size: 10px;">方法</a> <a href="../../../../tags/%E6%96%B9%E6%B3%95%E8%AE%BA/" style="font-size: 10px;">方法论</a> <a href="../../../../tags/%E6%97%A5%E5%B8%B8/" style="font-size: 11.67px;">日常</a> <a href="../../../../tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" style="font-size: 11.67px;">机器学习</a> <a href="../../../../tags/%E6%A0%87%E5%87%86%E5%8C%96/" style="font-size: 10px;">标准化</a> <a href="../../../../tags/%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90/" style="font-size: 10px;">案例分析</a> <a href="../../../../tags/%E6%AD%A3%E5%88%99%E5%8C%96/" style="font-size: 10px;">正则化</a> <a href="../../../../tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" style="font-size: 10px;">深度学习</a> <a href="../../../../tags/%E7%89%B9%E5%BE%81%E5%B7%A5%E7%A8%8B/" style="font-size: 10px;">特征工程</a> <a href="../../../../tags/%E7%94%9F%E6%B4%BB/" style="font-size: 10px;">生活</a> <a href="../../../../tags/%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0%E4%B8%8E%E9%9D%9E%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0/" style="font-size: 10px;">监督学习与非监督学习</a> <a href="../../../../tags/%E7%A4%BE%E4%BC%9A%E7%A7%91%E5%AD%A6/" style="font-size: 10px;">社会科学</a> <a href="../../../../tags/%E7%A7%91%E7%A0%94/" style="font-size: 11.67px;">科研</a> <a href="../../../../tags/%E7%A7%91%E7%A0%94%E5%B7%A5%E5%85%B7/" style="font-size: 10px;">科研工具</a> <a href="../../../../tags/%E7%A7%91%E7%A0%94%E7%AC%94%E8%AE%B0/" style="font-size: 10px;">科研笔记</a> <a href="../../../../tags/%E7%AB%9E%E8%B5%9B/" style="font-size: 10px;">竞赛</a> <a href="../../../../tags/%E7%AE%97%E6%B3%95/" style="font-size: 10px;">算法</a> <a href="../../../../tags/%E7%BB%98%E5%9B%BE/" style="font-size: 10px;">绘图</a> <a href="../../../../tags/%E7%BB%9F%E8%AE%A1%E5%AD%A6/" style="font-size: 13.33px;">统计学</a> <a href="../../../../tags/%E8%83%BD%E5%8A%9B/" style="font-size: 10px;">能力</a> <a href="../../../../tags/%E8%A5%BF%E7%93%9C%E4%B9%A6/" style="font-size: 10px;">西瓜书</a> <a href="../../../../tags/%E8%AE%A1%E9%87%8F%E7%BB%8F%E6%B5%8E%E5%AD%A6/" style="font-size: 11.67px;">计量经济学</a> <a href="../../../../tags/%E8%AF%BB%E4%B9%A6/" style="font-size: 10px;">读书</a> <a href="../../../../tags/%E8%B4%9D%E5%8F%B6%E6%96%AF%E5%88%86%E7%B1%BB%E5%99%A8/" style="font-size: 10px;">贝叶斯分类器</a> <a href="../../../../tags/%E8%B7%AF%E7%BA%BF/" style="font-size: 10px;">路线</a> <a href="../../../../tags/%E8%BF%90%E8%90%A5/" style="font-size: 10px;">运营</a> <a href="../../../../tags/%E9%9B%85%E6%80%9D/" style="font-size: 10px;">雅思</a> <a href="../../../../tags/%E9%A1%B9%E7%9B%AE/" style="font-size: 10px;">项目</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="../../../../archives/2023/12/">December 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="../../../../archives/2023/10/">October 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="../../../../archives/2023/09/">September 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="../../../../archives/2023/08/">August 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="../../../../archives/2023/04/">April 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="../../../../archives/2022/10/">October 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="../../../../archives/2022/09/">September 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="../../../../archives/2022/08/">August 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="../../../../archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="../../../../archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="../../../../archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="../../../../archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="../../../../archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="../../../../archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="../../../../archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="../../../../archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="../../../../archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="../../../../archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="../../../../archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="../../../../archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="../../../../archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="../../../../archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="../../../../archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="../../../../archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="../../../../archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="../../../../archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="../../../../archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="../../../../archives/2019/02/">February 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="../../../../2023/12/02/%E5%BE%AE%E8%A7%82%E7%BB%8F%E6%B5%8E%E5%AD%A6-%E5%B8%82%E5%9C%BA%E7%90%86%E8%AE%BA/">微观经济学-市场理论</a>
          </li>
        
          <li>
            <a href="../../../../2023/10/04/%E5%AD%A6%E4%B9%A0Daily-2023-md/">学习Daily-2023.md</a>
          </li>
        
          <li>
            <a href="../../../../2023/09/08/%E5%BE%AE%E8%A7%82%E7%BB%8F%E6%B5%8E%E5%AD%A6-%E6%88%90%E6%9C%AC/">微观经济学-成本</a>
          </li>
        
          <li>
            <a href="../../../../2023/09/04/%E5%BE%AE%E8%A7%82%E7%BB%8F%E6%B5%8E-%E6%B6%88%E8%B4%B9%E8%80%85%E8%A1%8C%E4%B8%BA/">微观经济-消费者行为</a>
          </li>
        
          <li>
            <a href="../../../../2023/09/03/%E5%BE%AE%E8%A7%82%E7%BB%8F%E6%B5%8E-%E9%9C%80%E6%B1%82%E4%BE%9B%E7%BB%99%E5%9D%87%E8%A1%A1%E4%BB%B7%E6%A0%BC/">微观经济-需求供给均衡价格</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2023 May May<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="../../../../index.html" class="mobile-nav-link">Home</a>
  
    <a href="../../../../archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="../../../../js/jquery-3.4.1.min.js"></script>



  
<script src="../../../../fancybox/jquery.fancybox.min.js"></script>




<script src="../../../../js/script.js"></script>





  </div>
</body>
</html>